{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rushikesh\\\\Downloads\\\\ng2482-main\\\\ng2482-main\\\\src\\\\components\\\\LoginForm.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport bcryptjs from 'bcryptjs';\nimport '../css/loginStyle.css';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport LoginService from '../service/LoginService';\nimport HeaderComponent from './HeaderComponent';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginForm(props) {\n  _s();\n\n  const [errorMessages, setErrorMessages] = useState({});\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const errors = {\n    uname: \"user not found\",\n    pass: \"invalid password\"\n  };\n\n  const handleSubmit = async event => {\n    //Prevent page reload\n    event.preventDefault();\n    var {\n      uname,\n      pass\n    } = document.forms[0];\n    const userDetails = await LoginService.getDetails(uname.value).catch(err => {\n      setErrorMessages({\n        name: \"uname\",\n        message: errors.uname\n      });\n    }); // Compare user info\n\n    if (userDetails.data.userName === uname.value) {\n      if (!bcryptjs.compareSync(pass.value, userDetails.data.password)) {\n        // Invalid password\n        setErrorMessages({\n          name: \"pass\",\n          message: errors.pass\n        });\n      } else {\n        alert(`welcome ${userDetails.data.fullName}`);\n        LoginService.userId(uname.value);\n        LoginService.userRole(userDetails.data.role);\n\n        if (userDetails.data.role === \"user\") {\n          props.navigate(\"/products\");\n        } else {\n          props.navigate(\"/admin\");\n        }\n\n        console.log(userDetails.data.role);\n        setIsSubmitted(true);\n      }\n    } else {\n      // Username not found\n      setErrorMessages({\n        name: \"uname\",\n        message: errors.uname\n      });\n    }\n  };\n\n  const renderErrorMessage = name => name === errorMessages.name && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error1\",\n    children: errorMessages.message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 7\n  }, this);\n\n  const onSignup = () => {\n    window.location = '/register';\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(HeaderComponent, {\n      userName: LoginService.id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"register-Form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"error\",\n          children: renderErrorMessage('uname')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"col-md-4 col-lg-6 col-xl-5\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"image\",\n            src: \"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\",\n            class: \"img-fluid\",\n            alt: \"Sample image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          align: \"center\",\n          children: \"LOGIN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"register\",\n          placeholder: \"username\",\n          name: \"uname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"register\",\n          placeholder: \"password\",\n          name: \"pass\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), renderErrorMessage(\"pass\"), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"regBtn\",\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"regBtn1\",\n      onClick: onSignup,\n      children: \"Sign up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginForm, \"xHac37XC1FUyoDun112aRZB/AH4=\");\n\n_c = LoginForm;\n\nfunction LoginPage() {\n  _s2();\n\n  const navigate = useNavigate();\n  return /*#__PURE__*/_jsxDEV(LoginForm, {\n    navigate: navigate\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(LoginPage, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n\n_c2 = LoginPage;\nexport default LoginPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LoginForm\");\n$RefreshReg$(_c2, \"LoginPage\");","map":{"version":3,"names":["React","useState","bcryptjs","Navigate","useNavigate","LoginService","HeaderComponent","LoginForm","props","errorMessages","setErrorMessages","isSubmitted","setIsSubmitted","errors","uname","pass","handleSubmit","event","preventDefault","document","forms","userDetails","getDetails","value","catch","err","name","message","data","userName","compareSync","password","alert","fullName","userId","userRole","role","navigate","console","log","renderErrorMessage","onSignup","window","location","id","LoginPage"],"sources":["C:/Users/Rushikesh/Downloads/ng2482-main/ng2482-main/src/components/LoginForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport bcryptjs from 'bcryptjs';\r\nimport '../css/loginStyle.css';\r\nimport { Navigate, useNavigate } from 'react-router-dom';\r\nimport LoginService from '../service/LoginService';\r\nimport HeaderComponent from './HeaderComponent';\r\n\r\nfunction LoginForm(props) {\r\n  const [errorMessages, setErrorMessages] = useState({});\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const errors = {\r\n    uname: \"user not found\",\r\n    pass: \"invalid password\"\r\n  };\r\n  const handleSubmit = async event => {\r\n    //Prevent page reload\r\n    event.preventDefault();\r\n\r\n    var { uname, pass } = document.forms[0];\r\n    const userDetails = await LoginService.getDetails(uname.value)\r\n      .catch(err => {\r\n        setErrorMessages({ name: \"uname\", message: errors.uname });\r\n      });\r\n\r\n\r\n    // Compare user info\r\n    if (userDetails.data.userName === uname.value) {\r\n      if (!bcryptjs.compareSync(pass.value, userDetails.data.password)) {\r\n        // Invalid password\r\n        setErrorMessages({ name: \"pass\", message: errors.pass });\r\n      } else {\r\n        alert(`welcome ${userDetails.data.fullName}`);\r\n        LoginService.userId(uname.value)\r\n        LoginService.userRole(userDetails.data.role)\r\n        if (userDetails.data.role === \"user\") {\r\n          props.navigate(\"/products\")\r\n        }\r\n        else {\r\n          props.navigate(\"/admin\")\r\n        }\r\n        console.log(userDetails.data.role)\r\n        setIsSubmitted(true);\r\n\r\n      }\r\n    } else {\r\n      // Username not found\r\n      setErrorMessages({ name: \"uname\", message: errors.uname });\r\n    }\r\n  };\r\n\r\n  const renderErrorMessage = (name) =>\r\n    name === errorMessages.name && (\r\n      <div className=\"error1\">{errorMessages.message}</div>\r\n    );\r\n\r\n  const onSignup = () => {\r\n    window.location = '/register';\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <HeaderComponent userName={LoginService.id}></HeaderComponent>\r\n\r\n      <form className='form' onSubmit={handleSubmit}>\r\n        <div className='register-Form'>\r\n          <h6 className=\"error\">{renderErrorMessage('uname')}</h6>\r\n          <div class=\"col-md-4 col-lg-6 col-xl-5\">\r\n        <img className=\"image\" src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\"\r\n          class=\"img-fluid\"  alt=\"Sample image\"></img>\r\n      </div>\r\n          <h1 align=\"center\">LOGIN</h1>\r\n          <hr></hr>\r\n\r\n\r\n          <label><b>Username</b></label>\r\n          <input type=\"text\" className='register' placeholder='username' name='uname' />\r\n          {/* <label><b>Email</b></label>\r\n                    <input type=\"text\" className='register' placeholder='abc.@' name='email'\r\n                        onChange={e => this.email = e.target.value}/> */}\r\n\r\n          <label><b>Password</b></label>\r\n          <input type=\"password\" className='register' placeholder='password' name='pass' />\r\n          {renderErrorMessage(\"pass\")}\r\n          {/* <label><b>Confirm Password</b></label>\r\n                    <input type=\"password\" className='register' placeholder='password' name='confirmpassword'\r\n                        onChange={e => this.confirmpassword = e.target.value}/> */}\r\n\r\n          <button className='regBtn'>Sign in</button>\r\n        </div>\r\n      </form>\r\n      <button className='regBtn1' onClick={onSignup}>Sign up</button>\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nfunction LoginPage() {\r\n  const navigate = useNavigate();\r\n  return (\r\n    <LoginForm navigate={navigate}></LoginForm>\r\n  )\r\n}\r\n\r\nexport default LoginPage\r\n\r\n\r\n\r\n"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAO,uBAAP;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,kBAAtC;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;EAAA;;EACxB,MAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCT,QAAQ,CAAC,EAAD,CAAlD;EACA,MAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,KAAD,CAA9C;EACA,MAAMY,MAAM,GAAG;IACbC,KAAK,EAAE,gBADM;IAEbC,IAAI,EAAE;EAFO,CAAf;;EAIA,MAAMC,YAAY,GAAG,MAAMC,KAAN,IAAe;IAClC;IACAA,KAAK,CAACC,cAAN;IAEA,IAAI;MAAEJ,KAAF;MAASC;IAAT,IAAkBI,QAAQ,CAACC,KAAT,CAAe,CAAf,CAAtB;IACA,MAAMC,WAAW,GAAG,MAAMhB,YAAY,CAACiB,UAAb,CAAwBR,KAAK,CAACS,KAA9B,EACvBC,KADuB,CACjBC,GAAG,IAAI;MACZf,gBAAgB,CAAC;QAAEgB,IAAI,EAAE,OAAR;QAAiBC,OAAO,EAAEd,MAAM,CAACC;MAAjC,CAAD,CAAhB;IACD,CAHuB,CAA1B,CALkC,CAWlC;;IACA,IAAIO,WAAW,CAACO,IAAZ,CAAiBC,QAAjB,KAA8Bf,KAAK,CAACS,KAAxC,EAA+C;MAC7C,IAAI,CAACrB,QAAQ,CAAC4B,WAAT,CAAqBf,IAAI,CAACQ,KAA1B,EAAiCF,WAAW,CAACO,IAAZ,CAAiBG,QAAlD,CAAL,EAAkE;QAChE;QACArB,gBAAgB,CAAC;UAAEgB,IAAI,EAAE,MAAR;UAAgBC,OAAO,EAAEd,MAAM,CAACE;QAAhC,CAAD,CAAhB;MACD,CAHD,MAGO;QACLiB,KAAK,CAAE,WAAUX,WAAW,CAACO,IAAZ,CAAiBK,QAAS,EAAtC,CAAL;QACA5B,YAAY,CAAC6B,MAAb,CAAoBpB,KAAK,CAACS,KAA1B;QACAlB,YAAY,CAAC8B,QAAb,CAAsBd,WAAW,CAACO,IAAZ,CAAiBQ,IAAvC;;QACA,IAAIf,WAAW,CAACO,IAAZ,CAAiBQ,IAAjB,KAA0B,MAA9B,EAAsC;UACpC5B,KAAK,CAAC6B,QAAN,CAAe,WAAf;QACD,CAFD,MAGK;UACH7B,KAAK,CAAC6B,QAAN,CAAe,QAAf;QACD;;QACDC,OAAO,CAACC,GAAR,CAAYlB,WAAW,CAACO,IAAZ,CAAiBQ,IAA7B;QACAxB,cAAc,CAAC,IAAD,CAAd;MAED;IACF,CAlBD,MAkBO;MACL;MACAF,gBAAgB,CAAC;QAAEgB,IAAI,EAAE,OAAR;QAAiBC,OAAO,EAAEd,MAAM,CAACC;MAAjC,CAAD,CAAhB;IACD;EACF,CAlCD;;EAoCA,MAAM0B,kBAAkB,GAAId,IAAD,IACzBA,IAAI,KAAKjB,aAAa,CAACiB,IAAvB,iBACE;IAAK,SAAS,EAAC,QAAf;IAAA,UAAyBjB,aAAa,CAACkB;EAAvC;IAAA;IAAA;IAAA;EAAA,QAFJ;;EAKA,MAAMc,QAAQ,GAAG,MAAM;IACrBC,MAAM,CAACC,QAAP,GAAkB,WAAlB;EACD,CAFD;;EAIA,oBACE;IAAA,wBACE,QAAC,eAAD;MAAiB,QAAQ,EAAEtC,YAAY,CAACuC;IAAxC;MAAA;MAAA;MAAA;IAAA,QADF,eAGE;MAAM,SAAS,EAAC,MAAhB;MAAuB,QAAQ,EAAE5B,YAAjC;MAAA,uBACE;QAAK,SAAS,EAAC,eAAf;QAAA,wBACE;UAAI,SAAS,EAAC,OAAd;UAAA,UAAuBwB,kBAAkB,CAAC,OAAD;QAAzC;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAK,KAAK,EAAC,4BAAX;UAAA,uBACF;YAAK,SAAS,EAAC,OAAf;YAAuB,GAAG,EAAC,mFAA3B;YACE,KAAK,EAAC,WADR;YACqB,GAAG,EAAC;UADzB;YAAA;YAAA;YAAA;UAAA;QADE;UAAA;UAAA;UAAA;QAAA,QAFF,eAME;UAAI,KAAK,EAAC,QAAV;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QANF,eAOE;UAAA;UAAA;UAAA;QAAA,QAPF,eAUE;UAAA,uBAAO;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAP;UAAA;UAAA;UAAA;QAAA,QAVF,eAWE;UAAO,IAAI,EAAC,MAAZ;UAAmB,SAAS,EAAC,UAA7B;UAAwC,WAAW,EAAC,UAApD;UAA+D,IAAI,EAAC;QAApE;UAAA;UAAA;UAAA;QAAA,QAXF,eAgBE;UAAA,uBAAO;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAP;UAAA;UAAA;UAAA;QAAA,QAhBF,eAiBE;UAAO,IAAI,EAAC,UAAZ;UAAuB,SAAS,EAAC,UAAjC;UAA4C,WAAW,EAAC,UAAxD;UAAmE,IAAI,EAAC;QAAxE;UAAA;UAAA;UAAA;QAAA,QAjBF,EAkBGA,kBAAkB,CAAC,MAAD,CAlBrB,eAuBE;UAAQ,SAAS,EAAC,QAAlB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAvBF;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAHF,eA8BE;MAAQ,SAAS,EAAC,SAAlB;MAA4B,OAAO,EAAEC,QAArC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QA9BF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAqCD;;GAzFQlC,S;;KAAAA,S;;AA2FT,SAASsC,SAAT,GAAqB;EAAA;;EACnB,MAAMR,QAAQ,GAAGjC,WAAW,EAA5B;EACA,oBACE,QAAC,SAAD;IAAW,QAAQ,EAAEiC;EAArB;IAAA;IAAA;IAAA;EAAA,QADF;AAGD;;IALQQ,S;UACUzC,W;;;MADVyC,S;AAOT,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}